"use strict";(globalThis.webpackChunkmon_site=globalThis.webpackChunkmon_site||[]).push([[9267],{7689(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"fivem/optimiser","title":"Optimiser son serveur FiveM","description":"Guide complet pour optimiser les performances de votre serveur FiveM et offrir la meilleure exp\xe9rience \xe0 vos joueurs.","source":"@site/docs/fivem/optimiser.md","sourceDirName":"fivem","slug":"/fivem/optimiser","permalink":"/fivem/optimiser","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1771971631000,"frontMatter":{"title":"Optimiser son serveur FiveM"},"sidebar":"docs","previous":{"title":"Activer OneSync et OneSync Infinity","permalink":"/fivem/onesync-infinity"},"next":{"title":"Erreur \\"Serveur Priv\xe9\\"","permalink":"/fivem/erreur-serveur-prive"}}');var t=i(4848),l=i(8453);const r={title:"Optimiser son serveur FiveM"},a=void 0,o={},d=[{value:"Diagnostic des performances",id:"diagnostic-des-performances",level:2},{value:"Mesurer les performances actuelles",id:"mesurer-les-performances-actuelles",level:3},{value:"Identifier les ressources gourmandes",id:"identifier-les-ressources-gourmandes",level:3},{value:"Optimisation server.cfg",id:"optimisation-servercfg",level:2},{value:"Configuration r\xe9seau",id:"configuration-r\xe9seau",level:3},{value:"OneSync optimis\xe9",id:"onesync-optimis\xe9",level:3},{value:"Convars performance",id:"convars-performance",level:3},{value:"Optimisation scripts",id:"optimisation-scripts",level:2},{value:"Bonnes pratiques Lua",id:"bonnes-pratiques-lua",level:3},{value:"Scripts \xe0 \xe9viter",id:"scripts-\xe0-\xe9viter",level:3},{value:"Nettoyage des ressources",id:"nettoyage-des-ressources",level:3},{value:"Optimisation base de donn\xe9es",id:"optimisation-base-de-donn\xe9es",level:2},{value:"MySQL/MariaDB configuration",id:"mysqlmariadb-configuration",level:3},{value:"Optimisation oxmysql",id:"optimisation-oxmysql",level:3},{value:"Index sur tables",id:"index-sur-tables",level:3},{value:"Nettoyage r\xe9gulier",id:"nettoyage-r\xe9gulier",level:3},{value:"Optimisation assets",id:"optimisation-assets",level:2},{value:"Mod\xe8les et textures",id:"mod\xe8les-et-textures",level:3},{value:"Audio files",id:"audio-files",level:3},{value:"Streaming optimis\xe9",id:"streaming-optimis\xe9",level:3},{value:"Optimisation cartes et maps",id:"optimisation-cartes-et-maps",level:2},{value:"Optimisation IPL",id:"optimisation-ipl",level:3},{value:"LOD (Level of Detail)",id:"lod-level-of-detail",level:3},{value:"Props limits",id:"props-limits",level:3},{value:"Optimisation v\xe9hicules",id:"optimisation-v\xe9hicules",level:2},{value:"Handling optimis\xe9",id:"handling-optimis\xe9",level:3},{value:"Streaming v\xe9hicules",id:"streaming-v\xe9hicules",level:3},{value:"Cleanup automatique",id:"cleanup-automatique",level:3},{value:"Optimisation client-side",id:"optimisation-client-side",level:2},{value:"NUI optimis\xe9",id:"nui-optimis\xe9",level:3},{value:"DrawText optimis\xe9",id:"drawtext-optimis\xe9",level:3},{value:"Monitoring en continu",id:"monitoring-en-continu",level:2},{value:"txAdmin Monitoring",id:"txadmin-monitoring",level:3},{value:"Logs analyse",id:"logs-analyse",level:3},{value:"Alertes automatiques",id:"alertes-automatiques",level:3},{value:"Optimisations avanc\xe9es",id:"optimisations-avanc\xe9es",level:2},{value:"Multi-threading",id:"multi-threading",level:3},{value:"Garbage Collection",id:"garbage-collection",level:3},{value:"Asset pr\xe9-loading s\xe9lectif",id:"asset-pr\xe9-loading-s\xe9lectif",level:3},{value:"Checklist optimisation",id:"checklist-optimisation",level:2},{value:"Avant lancement",id:"avant-lancement",level:3},{value:"Maintenance r\xe9guli\xe8re",id:"maintenance-r\xe9guli\xe8re",level:3},{value:"R\xe9sultats attendus",id:"r\xe9sultats-attendus",level:2},{value:"Ressources",id:"ressources",level:2},{value:"Support",id:"support",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Guide complet pour optimiser les performances de votre serveur FiveM et offrir la meilleure exp\xe9rience \xe0 vos joueurs."}),"\n",(0,t.jsx)(n.h2,{id:"diagnostic-des-performances",children:"Diagnostic des performances"}),"\n",(0,t.jsx)(n.h3,{id:"mesurer-les-performances-actuelles",children:"Mesurer les performances actuelles"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Commande console :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Afficher FPS serveur (devrait \xeatre ~30)\nperf\n\n# M\xe9triques d\xe9taill\xe9es\nresmon\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Indicateurs cl\xe9s :"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Server FPS"})," : 30 = Parfait, 20-25 = Acceptable, <20 = Probl\xe9matique"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tick Time"})," : <5ms = Excellent, 5-15ms = Bon, >15ms = \xc0 optimiser"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RAM Usage"})," : Selon nombre de joueurs (100-150MB/joueur)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"identifier-les-ressources-gourmandes",children:"Identifier les ressources gourmandes"}),"\n",(0,t.jsx)(n.p,{children:"Dans la console txAdmin ou FXServer :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Afficher ressources par CPU usage\nresmon\n\n# Trier par ordre d\xe9croissant\n# Identifiez les scripts consommant le plus\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Top 3 coupables habituels :"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Scripts v\xe9hicules personnalis\xe9s"}),"\n",(0,t.jsx)(n.li,{children:"HUD/UI complexes"}),"\n",(0,t.jsx)(n.li,{children:"Scripts de mapping dynamique"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"optimisation-servercfg",children:"Optimisation server.cfg"}),"\n",(0,t.jsx)(n.h3,{id:"configuration-r\xe9seau",children:"Configuration r\xe9seau"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Endpoints\nendpoint_add_tcp "0.0.0.0:30120"\nendpoint_add_udp "0.0.0.0:30120"\n\n# Heartbeat\nsv_endpointprivacy true\n\n# Network threading (am\xe9liore performances)\nset sv_useSocketThreading true\n\n# Enforcer GameBuild (stabilit\xe9)\nsv_enforceGameBuild 2802\n\n# Connexion settings\nsv_maxclients 32  # Ajustez selon vos besoins\nsv_timeout 120\n\n# T\xe9l\xe9chargement optimis\xe9\nsv_allowDownload true\nload_server_icon logo.png\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onesync-optimis\xe9",children:"OneSync optimis\xe9"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# OneSync avec optimisations\nset onesync on\nset onesync_enableInfinity 1  # Si disponible\nset onesync_enableBeyond 0\n\n# Distances de synchronisation r\xe9duites = meilleure perf\nset onesync_distanceCullVehicles 400.0\nset onesync_distanceCull 400.0\n\n# Population AI (d\xe9sactivez si RP sans PNJ)\nset onesync_population 0\n\n# Force migration\nset onesync_forceMigration 1\n"})}),"\n",(0,t.jsx)(n.h3,{id:"convars-performance",children:"Convars performance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# FiveM performance convars\nset sv_filterRequestControl 4\nset sv_packetTimeInterval 10\n\n# Voice chat optimis\xe9\nsetr voice_useNativeAudio true\nsetr voice_use3dAudio false\nsetr voice_useSendingRangeOnly true\n\n# Script hook\nset sv_scriptHookAllowed 0\n\n# Entity lockdown\nset sv_entityLockdown true\n"})}),"\n",(0,t.jsx)(n.h2,{id:"optimisation-scripts",children:"Optimisation scripts"}),"\n",(0,t.jsx)(n.h3,{id:"bonnes-pratiques-lua",children:"Bonnes pratiques Lua"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\xc9vitez les boucles inutiles :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"-- \u274c MAUVAIS - Loop toutes les frames\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(0)  -- Trop fr\xe9quent !\n        -- Code\n    end\nend)\n\n-- \u2705 BON - Loop intelligente\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(1000)  -- Toutes les secondes\n        -- Code non-critique\n    end\nend)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Utilisez les events au lieu de loops :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"-- \u274c MAUVAIS - V\xe9rifier constamment\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(0)\n        if IsControlJustPressed(0, 38) then  -- E\n            -- Action\n        end\n    end\nend)\n\n-- \u2705 BON - Event listener\nRegisterCommand('interact', function()\n    -- Action\nend, false)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Optimisez les recherches de joueurs :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"-- \u274c MAUVAIS\nfor _, player in ipairs(GetPlayers()) do\n    local ped = GetPlayerPed(player)\n    local coords = GetEntityCoords(ped)\n    -- Chaque frame = lourd !\nend\n\n-- \u2705 BON - Cache et update moins fr\xe9quent\nlocal nearbyPlayers = {}\n\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(1000)  -- Update toutes les secondes\n        nearbyPlayers = GetNearbyPlayers(100.0)\n    end\nend)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"scripts-\xe0-\xe9viter",children:"Scripts \xe0 \xe9viter"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Remplacements recommand\xe9s :"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Script lourd"}),(0,t.jsx)(n.th,{children:"Alternative l\xe9g\xe8re"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"esx_scoreboard ancien"}),(0,t.jsx)(n.td,{children:"esx_scoreboard optimis\xe9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bob74_ipl"}),(0,t.jsx)(n.td,{children:"PocceMod"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"vSync / cd_easytime"}),(0,t.jsx)(n.td,{children:"qb-weathersync"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"esx_status"}),(0,t.jsx)(n.td,{children:"Status moderne"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"nettoyage-des-ressources",children:"Nettoyage des ressources"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Scripts inutilis\xe9s :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Commentez dans server.cfg\n# ensure old_unused_script\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Doublons :"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"N'ayez qu'un seul script HUD"}),"\n",(0,t.jsx)(n.li,{children:"Qu'un seul syst\xe8me d'inventaire"}),"\n",(0,t.jsx)(n.li,{children:"Qu'un seul syst\xe8me de garage"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"optimisation-base-de-donn\xe9es",children:"Optimisation base de donn\xe9es"}),"\n",(0,t.jsx)(n.h3,{id:"mysqlmariadb-configuration",children:"MySQL/MariaDB configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.code,{children:"/etc/mysql/my.cnf"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[mysqld]\n# InnoDB optimizations\ninnodb_buffer_pool_size = 2G  # 70% RAM disponible\ninnodb_log_file_size = 512M\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\ninnodb_file_per_table = 1\n\n# Query cache\nquery_cache_type = 1\nquery_cache_size = 128M\nquery_cache_limit = 4M\n\n# Connections\nmax_connections = 200\nconnect_timeout = 10\nwait_timeout = 600\n\n# Thread pool\nthread_cache_size = 50\ntable_open_cache = 4000\n\n# Binlog (d\xe9sactivez si pas de r\xe9plication)\nskip-log-bin\n"})}),"\n",(0,t.jsx)(n.h3,{id:"optimisation-oxmysql",children:"Optimisation oxmysql"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# server.cfg\nset mysql_connection_string "mysql://user:pass@localhost/db?connectionLimit=10&charset=utf8mb4"\nset mysql_slow_query_warning 100\nset mysql_debug 0\n'})}),"\n",(0,t.jsx)(n.h3,{id:"index-sur-tables",children:"Index sur tables"}),"\n",(0,t.jsx)(n.p,{children:"Acc\xe9l\xe9rez les requ\xeates :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Identifier et owner fr\xe9quemment recherch\xe9s\nCREATE INDEX idx_identifier ON users(identifier);\nCREATE INDEX idx_owner ON owned_vehicles(owner);\n\n-- Tables d'inventaire\nCREATE INDEX idx_item ON items(owner, name);\n\n-- Logs avec date\nCREATE INDEX idx_date ON server_logs(date);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"nettoyage-r\xe9gulier",children:"Nettoyage r\xe9gulier"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- Supprimer anciens logs (> 30 jours)\nDELETE FROM server_logs WHERE date < DATE_SUB(NOW(), INTERVAL 30 DAY);\n\n-- Optimiser tables\nOPTIMIZE TABLE users, owned_vehicles, items;\n\n-- Analyser tables\nANALYZE TABLE users, owned_vehicles;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"optimisation-assets",children:"Optimisation assets"}),"\n",(0,t.jsx)(n.h3,{id:"mod\xe8les-et-textures",children:"Mod\xe8les et textures"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Compression textures :"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Utilisez DDS au lieu de PNG/JPG"}),"\n",(0,t.jsx)(n.li,{children:"R\xe9solution max 2048x2048 pour v\xe9hicules"}),"\n",(0,t.jsx)(n.li,{children:"R\xe9solution max 1024x1024 pour props"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"YTD Optimizer :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Compresser automatiquement\nytd_optimizer.exe input.ytd output.ytd --quality 85\n"})}),"\n",(0,t.jsx)(n.h3,{id:"audio-files",children:"Audio files"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Convertir en OGG (meilleure compression)\nffmpeg -i input.wav -c:a libvorbis -q:a 4 output.ogg\n\n# Mono pour sons simples (\xe9conomise 50%)\nffmpeg -i stereo.ogg -ac 1 mono.ogg\n"})}),"\n",(0,t.jsx)(n.h3,{id:"streaming-optimis\xe9",children:"Streaming optimis\xe9"}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.code,{children:"fxmanifest.lua"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fx_version 'cerulean'\ngame 'gta5'\n\n-- Streaming optimis\xe9\nthis_is_a_map 'yes'\n\nfiles {\n    'stream/**/*.ytyp',\n}\n\ndata_file 'DLC_ITYP_REQUEST' 'stream/**/*.ytyp'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"optimisation-cartes-et-maps",children:"Optimisation cartes et maps"}),"\n",(0,t.jsx)(n.h3,{id:"optimisation-ipl",children:"Optimisation IPL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"-- D\xe9sactiver IPL inutiles\nCitizen.CreateThread(function()\n    -- Liste IPL non utilis\xe9s\n    local unusedIpls = {\n        'id2_14_during_door',\n        'id2_14_during1',\n        'id2_14_during2',\n    }\n    \n    for _, ipl in ipairs(unusedIpls) do\n        RemoveIpl(ipl)\n    end\nend)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"lod-level-of-detail",children:"LOD (Level of Detail)"}),"\n",(0,t.jsx)(n.p,{children:"Cr\xe9ez des LOD pour objets volumineux :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"D\xe9taill\xe9 pr\xe8s (<50m)"}),"\n",(0,t.jsx)(n.li,{children:"Moyen proche (50-150m)"}),"\n",(0,t.jsx)(n.li,{children:"Simplifi\xe9 loin (>150m)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"props-limits",children:"Props limits"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'-- Limiter props par zone\nConfig.MaxProps = {\n    ["legion_square"] = 100,\n    ["lsia"] = 50,\n    ["default"] = 150\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"optimisation-v\xe9hicules",children:"Optimisation v\xe9hicules"}),"\n",(0,t.jsx)(n.h3,{id:"handling-optimis\xe9",children:"Handling optimis\xe9"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- handling.meta --\x3e\n<fMass value="1400.0" />  \x3c!-- R\xe9duire masse --\x3e\n<fDragCoeff value="3.5" />  \x3c!-- R\xe9duire drag --\x3e\n'})}),"\n",(0,t.jsx)(n.h3,{id:"streaming-v\xe9hicules",children:"Streaming v\xe9hicules"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"-- Stream on-demand au lieu de pr\xe9-charger\nConfig.VehicleStreaming = true\n\n-- Limiter v\xe9hicules simultan\xe9s\nConfig.MaxVehiclesSpawned = 10\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cleanup-automatique",children:"Cleanup automatique"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"-- Script cleanup.lua\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(300000)  -- 5 minutes\n        \n        local vehicles = GetAllVehicles()\n        for _, veh in ipairs(vehicles) do\n            if not IsPedAVehicle(GetPedInVehicleSeat(veh, -1)) then\n                local timer = GetVehicleUpgradeTimer(veh)\n                if timer > 600 then  -- 10 min sans conducteur\n                    DeleteEntity(veh)\n                end\n            end\n        end\n    end\nend)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"optimisation-client-side",children:"Optimisation client-side"}),"\n",(0,t.jsx)(n.h3,{id:"nui-optimis\xe9",children:"NUI optimis\xe9"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HTML/CSS l\xe9ger :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:"\x3c!-- \xc9vitez gros frameworks comme Bootstrap --\x3e\n\x3c!-- Utilisez CSS vanilla optimis\xe9 --\x3e\n<style>\n/* Utilisez transforms au lieu de position */\n.element {\n    transform: translateX(100px);  /* GPU accelerated */\n    /* Au lieu de: left: 100px; */\n}\n</style>\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"JavaScript optimis\xe9 :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Debounce events\nfunction debounce(func, wait) {\n    let timeout;\n    return function() {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, arguments), wait);\n    };\n}\n\nwindow.addEventListener('message', debounce((event) => {\n    // Handle message\n}, 100));\n"})}),"\n",(0,t.jsx)(n.h3,{id:"drawtext-optimis\xe9",children:"DrawText optimis\xe9"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'-- \u274c MAUVAIS - Recalcule chaque frame\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(0)\n        DrawText3D(x, y, z, "Texte")\n    end\nend)\n\n-- \u2705 BON - Cache et optimise\nlocal textCoords = vector3(x, y, z)\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(0)\n        local pCoords = GetEntityCoords(PlayerPedId())\n        if #(pCoords - textCoords) < 10.0 then\n            DrawText3D(textCoords, "Texte")\n        else\n            Citizen.Wait(1000)  -- Plus lent si loin\n        end\n    end\nend)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"monitoring-en-continu",children:"Monitoring en continu"}),"\n",(0,t.jsx)(n.h3,{id:"txadmin-monitoring",children:"txAdmin Monitoring"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"M\xe9triques \xe0 surveiller :"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CPU Usage : <70%"}),"\n",(0,t.jsx)(n.li,{children:"RAM Usage : <80% de disponible"}),"\n",(0,t.jsx)(n.li,{children:"Tickrate : >25 FPS"}),"\n",(0,t.jsx)(n.li,{children:"Player Latency : <100ms"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"logs-analyse",children:"Logs analyse"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Chercher warnings\ncat FXServer.log | grep "WARN"\n\n# Scripts lents\ncat FXServer.log | grep "took"\n\n# Erreurs fr\xe9quentes\ncat FXServer.log | grep "ERROR" | sort | uniq -c\n'})}),"\n",(0,t.jsx)(n.h3,{id:"alertes-automatiques",children:"Alertes automatiques"}),"\n",(0,t.jsx)(n.p,{children:"Script Discord webhook :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# monitor.sh\n\nCPU=$(top -bn1 | grep "Cpu(s)" | awk \'{print $2}\')\nRAM=$(free | grep Mem | awk \'{print ($3/$2) * 100.0}\')\n\nif (( $(echo "$CPU > 80" | bc -l) )); then\n    curl -X POST "WEBHOOK_URL" \\\n        -H "Content-Type: application/json" \\\n        -d "{\\"content\\":\\"\u26a0\ufe0f CPU usage: ${CPU}%\\"}"\nfi\n'})}),"\n",(0,t.jsx)(n.h2,{id:"optimisations-avanc\xe9es",children:"Optimisations avanc\xe9es"}),"\n",(0,t.jsx)(n.h3,{id:"multi-threading",children:"Multi-threading"}),"\n",(0,t.jsx)(n.p,{children:"Activez dans server.cfg :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"set sv_useSocketThreading true\nset sv_netThread true\n"})}),"\n",(0,t.jsx)(n.h3,{id:"garbage-collection",children:"Garbage Collection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'-- Forcer GC r\xe9guli\xe8rement c\xf4t\xe9 serveur\nCitizen.CreateThread(function()\n    while true do\n        Citizen.Wait(600000)  -- 10 minutes\n        collectgarbage("collect")\n    end\nend)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"asset-pr\xe9-loading-s\xe9lectif",children:"Asset pr\xe9-loading s\xe9lectif"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'-- Charger uniquement assets n\xe9cessaires\nCitizen.CreateThread(function()\n    local models = {\n        GetHashKey("adder"),\n        GetHashKey("zentorno")\n    }\n    \n    for _, model in ipairs(models) do\n        RequestModel(model)\n        while not HasModelLoaded(model) do\n            Citizen.Wait(0)\n        end\n    end\nend)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"checklist-optimisation",children:"Checklist optimisation"}),"\n",(0,t.jsx)(n.h3,{id:"avant-lancement",children:"Avant lancement"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Scripts test\xe9s et optimis\xe9s"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Base de donn\xe9es index\xe9e"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Assets compress\xe9s"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Server.cfg configur\xe9"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Backup cr\xe9\xe9e"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Load test effectu\xe9"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"maintenance-r\xe9guli\xe8re",children:"Maintenance r\xe9guli\xe8re"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Logs analys\xe9s (hebdomadaire)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","BDD optimis\xe9e (mensuel)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cleanup ressources (mensuel)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Updates scripts (mensuel)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitoring actif (quotidien)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"r\xe9sultats-attendus",children:"R\xe9sultats attendus"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Avant optimisation :"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Server FPS : 15-20"}),"\n",(0,t.jsx)(n.li,{children:"RAM : 12GB pour 32 joueurs"}),"\n",(0,t.jsx)(n.li,{children:"Latence : 80-150ms"}),"\n",(0,t.jsx)(n.li,{children:"Lag spikes fr\xe9quents"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Apr\xe8s optimisation :"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Server FPS : 28-30"}),"\n",(0,t.jsx)(n.li,{children:"RAM : 6-8GB pour 32 joueurs"}),"\n",(0,t.jsx)(n.li,{children:"Latence : 40-80ms"}),"\n",(0,t.jsx)(n.li,{children:"Performance stable"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.fivem.net/docs/scripting-manual/optimization/",children:"FiveM Performance Guide"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/major/MySQLTuner-perl",children:"MySQL Tuner"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.lua.org/gems/sample.pdf",children:"Lua Performance Tips"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,t.jsxs)(n.p,{children:["Besoin d'aide pour optimiser ? ",(0,t.jsx)(n.a,{href:"https://discord.gg/UaHNnMarQA",children:"Discord LKL Cloud"})]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var s=i(6540);const t={},l=s.createContext(t);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);