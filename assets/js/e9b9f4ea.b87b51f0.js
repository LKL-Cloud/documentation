"use strict";(globalThis.webpackChunkmon_site=globalThis.webpackChunkmon_site||[]).push([[7418],{6868(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tuto-vps/monitoring-serveur","title":"Monitoring serveur","description":"Guide complet pour surveiller les performances et l\'\xe9tat de votre serveur avec diff\xe9rents outils de monitoring.","source":"@site/docs/tuto-vps/monitoring-serveur.md","sourceDirName":"tuto-vps","slug":"/tuto-vps/monitoring-serveur","permalink":"/tuto-vps/monitoring-serveur","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1771969836000,"frontMatter":{"title":"Monitoring serveur"},"sidebar":"docs","previous":{"title":"Configurer un Reverse Proxy","permalink":"/tuto-vps/configurer-reverse-proxy"},"next":{"title":"index","permalink":"/vps-windows/"}}');var r=s(4848),l=s(8453);const t={title:"Monitoring serveur"},a=void 0,c={},o=[{value:"Monitoring de base",id:"monitoring-de-base",level:2},{value:"Commandes syst\xe8me essentielles",id:"commandes-syst\xe8me-essentielles",level:3},{value:"htop - Monitoring interactif",id:"htop---monitoring-interactif",level:2},{value:"Installation",id:"installation",level:3},{value:"Utilisation",id:"utilisation",level:3},{value:"glances - Monitoring complet",id:"glances---monitoring-complet",level:2},{value:"Installation",id:"installation-1",level:3},{value:"Utilisation",id:"utilisation-1",level:3},{value:"Netdata - Monitoring temps r\xe9el",id:"netdata---monitoring-temps-r\xe9el",level:2},{value:"Installation",id:"installation-2",level:3},{value:"Acc\xe8s interface",id:"acc\xe8s-interface",level:3},{value:"Configuration alertes",id:"configuration-alertes",level:3},{value:"S\xe9curiser Netdata",id:"s\xe9curiser-netdata",level:3},{value:"Prometheus + Grafana",id:"prometheus--grafana",level:2},{value:"Installation Prometheus",id:"installation-prometheus",level:3},{value:"Node Exporter",id:"node-exporter",level:3},{value:"Installation Grafana",id:"installation-grafana",level:3},{value:"Configuration Grafana",id:"configuration-grafana",level:3},{value:"Uptime Kuma",id:"uptime-kuma",level:2},{value:"Installation via Docker",id:"installation-via-docker",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Scripts monitoring custom",id:"scripts-monitoring-custom",level:2},{value:"CPU Alert",id:"cpu-alert",level:3},{value:"Disk Space Alert",id:"disk-space-alert",level:3},{value:"Service Monitor",id:"service-monitor",level:3},{value:"Automatiser avec Cron",id:"automatiser-avec-cron",level:3},{value:"Logs centralis\xe9s",id:"logs-centralis\xe9s",level:2},{value:"rsyslog",id:"rsyslog",level:3},{value:"Loki + Grafana",id:"loki--grafana",level:3},{value:"Alertes avanc\xe9es",id:"alertes-avanc\xe9es",level:2},{value:"PagerDuty",id:"pagerduty",level:3},{value:"OpsGenie",id:"opsgenie",level:3},{value:"Healthchecks.io",id:"healthchecksio",level:3},{value:"Monitoring applications",id:"monitoring-applications",level:2},{value:"PM2 Monitoring",id:"pm2-monitoring",level:3},{value:"APM (Application Performance Monitoring)",id:"apm-application-performance-monitoring",level:3},{value:"Best practices",id:"best-practices",level:2},{value:"Checklist monitoring",id:"checklist-monitoring",level:3},{value:"M\xe9triques importantes",id:"m\xe9triques-importantes",level:3},{value:"Retention",id:"retention",level:3},{value:"Ressources",id:"ressources",level:2},{value:"Support",id:"support",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Guide complet pour surveiller les performances et l'\xe9tat de votre serveur avec diff\xe9rents outils de monitoring."}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-de-base",children:"Monitoring de base"}),"\n",(0,r.jsx)(n.h3,{id:"commandes-syst\xe8me-essentielles",children:"Commandes syst\xe8me essentielles"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CPU et RAM :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Vue d'ensemble\ntop\n\n# Alternative moderne\nhtop\n\n# Vue syst\xe8me compl\xe8te\nglances\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Espace disque :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Utilisation disques\ndf -h\n\n# Utilisation dossiers\ndu -sh /*\n\n# Trouver gros fichiers\ndu -ah / | sort -rh | head -20\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Processus :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Lister processus\nps aux\n\n# Par utilisation CPU\nps aux --sort=-%cpu | head -10\n\n# Par utilisation RAM\nps aux --sort=-%mem | head -10\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"R\xe9seau :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Connexions actives\nnetstat -tulpn\n\n# Alternative moderne\nss -tulpn\n\n# Bande passante temps r\xe9el\niftop\n"})}),"\n",(0,r.jsx)(n.h2,{id:"htop---monitoring-interactif",children:"htop - Monitoring interactif"}),"\n",(0,r.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install htop\n"})}),"\n",(0,r.jsx)(n.h3,{id:"utilisation",children:"Utilisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"htop\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Navigation :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F1"})," : Aide"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F2"})," : Setup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F3"})," : Recherche processus"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F4"})," : Filtre"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F5"})," : Vue arbre"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F6"})," : Trier par colonne"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F9"})," : Kill processus"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"F10"})," : Quitter"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Colonnes importantes :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PID"})," : Process ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"USER"})," : Propri\xe9taire"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PRI"})," : Priorit\xe9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"NI"})," : Nice value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VIRT"})," : M\xe9moire virtuelle"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RES"})," : RAM r\xe9elle utilis\xe9e"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SHR"})," : M\xe9moire partag\xe9e"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"%CPU"})," : Utilisation CPU"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"%MEM"})," : Utilisation RAM"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TIME+"})," : Temps CPU total"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"glances---monitoring-complet",children:"glances - Monitoring complet"}),"\n",(0,r.jsx)(n.h3,{id:"installation-1",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install glances\n"})}),"\n",(0,r.jsx)(n.h3,{id:"utilisation-1",children:"Utilisation"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Mode local :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"glances\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Mode serveur :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# D\xe9marrer serveur\nglances -w\n\n# Acc\xe8s web\n# http://VOTRE_IP:61208\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Mode client :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"glances -c SERVEUR_IP\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fonctionnalit\xe9s :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CPU, RAM, Swap, Load average"}),"\n",(0,r.jsx)(n.li,{children:"R\xe9seau (RX/TX)"}),"\n",(0,r.jsx)(n.li,{children:"Disques I/O"}),"\n",(0,r.jsx)(n.li,{children:"Processus tri\xe9s"}),"\n",(0,r.jsx)(n.li,{children:"Sensors temp\xe9rature"}),"\n",(0,r.jsx)(n.li,{children:"Docker containers"}),"\n",(0,r.jsx)(n.li,{children:"Alertes configurables"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Raccourcis :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"h"})," : Aide"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"q"})," : Quitter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"d"})," : Afficher/Cacher disques"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"n"})," : Afficher/Cacher r\xe9seau"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"s"})," : Afficher/Cacher sensors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"D"})," : Afficher/Cacher Docker"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"netdata---monitoring-temps-r\xe9el",children:"Netdata - Monitoring temps r\xe9el"}),"\n",(0,r.jsx)(n.h3,{id:"installation-2",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Script automatique\nbash <(curl -Ss https://my-netdata.io/kickstart.sh)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"acc\xe8s-interface",children:"Acc\xe8s interface"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"URL :"})," ",(0,r.jsx)(n.code,{children:"http://VOTRE_IP:19999"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fonctionnalit\xe9s :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dashboard temps r\xe9el (1s refresh)"}),"\n",(0,r.jsx)(n.li,{children:"Graphiques interactifs"}),"\n",(0,r.jsx)(n.li,{children:"Historique complet"}),"\n",(0,r.jsx)(n.li,{children:"Alertes configurables"}),"\n",(0,r.jsx)(n.li,{children:"Support Docker"}),"\n",(0,r.jsx)(n.li,{children:"Export vers backends (Prometheus, Graphite)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-alertes",children:"Configuration alertes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/netdata/health_alarm_notify.conf\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Discord webhook :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'DISCORD_WEBHOOK_URL="https://discord.com/api/webhooks/..."\nSEND_DISCORD="YES"\nDEFAULT_RECIPIENT_DISCORD=""\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Email :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'EMAIL_SENDER="netdata@votredomaine.com"\nDEFAULT_RECIPIENT_EMAIL="admin@votredomaine.com"\nSEND_EMAIL="YES"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"s\xe9curiser-netdata",children:"S\xe9curiser Netdata"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Restriction IP :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/netdata/netdata.conf\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[web]\n    bind to = 127.0.0.1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Via Nginx reverse proxy :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:'server {\n    listen 443 ssl http2;\n    server_name monitoring.votredomaine.com;\n\n    auth_basic "Monitoring";\n    auth_basic_user_file /etc/nginx/.htpasswd;\n\n    location / {\n        proxy_pass http://127.0.0.1:19999;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"prometheus--grafana",children:"Prometheus + Grafana"}),"\n",(0,r.jsx)(n.p,{children:"Stack monitoring professionnel."}),"\n",(0,r.jsx)(n.h3,{id:"installation-prometheus",children:"Installation Prometheus"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Cr\xe9er utilisateur\nsudo useradd --no-create-home --shell /bin/false prometheus\n\n# T\xe9l\xe9charger\ncd /tmp\nwget https://github.com/prometheus/prometheus/releases/download/v2.45.0/prometheus-2.45.0.linux-amd64.tar.gz\ntar xvf prometheus-*.tar.gz\ncd prometheus-*/\n\n# Installer\nsudo cp prometheus promtool /usr/local/bin/\nsudo cp -r consoles console_libraries /etc/prometheus/\n\n# Configuration\nsudo nano /etc/prometheus/prometheus.yml\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"prometheus.yml :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"global:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nscrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n      - targets: ['localhost:9090']\n\n  - job_name: 'node'\n    static_configs:\n      - targets: ['localhost:9100']\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Service systemd :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/systemd/system/prometheus.service\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[Unit]\nDescription=Prometheus\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nUser=prometheus\nGroup=prometheus\nType=simple\nExecStart=/usr/local/bin/prometheus \\\n    --config.file /etc/prometheus/prometheus.yml \\\n    --storage.tsdb.path /var/lib/prometheus/ \\\n    --web.console.templates=/etc/prometheus/consoles \\\n    --web.console.libraries=/etc/prometheus/console_libraries\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"D\xe9marrer :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl daemon-reload\nsudo systemctl start prometheus\nsudo systemctl enable prometheus\n"})}),"\n",(0,r.jsx)(n.h3,{id:"node-exporter",children:"Node Exporter"}),"\n",(0,r.jsx)(n.p,{children:"Exporte m\xe9triques syst\xe8me pour Prometheus."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# T\xe9l\xe9charger\nwget https://github.com/prometheus/node_exporter/releases/download/v1.6.0/node_exporter-1.6.0.linux-amd64.tar.gz\ntar xvf node_exporter-*.tar.gz\nsudo cp node_exporter-*/node_exporter /usr/local/bin/\n\n# Service\nsudo nano /etc/systemd/system/node_exporter.service\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[Unit]\nDescription=Node Exporter\nAfter=network.target\n\n[Service]\nUser=prometheus\nGroup=prometheus\nType=simple\nExecStart=/usr/local/bin/node_exporter\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl start node_exporter\nsudo systemctl enable node_exporter\n"})}),"\n",(0,r.jsx)(n.h3,{id:"installation-grafana",children:"Installation Grafana"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Ajouter repository\nsudo apt install -y software-properties-common\nwget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -\necho "deb https://packages.grafana.com/oss/deb stable main" | sudo tee /etc/apt/sources.list.d/grafana.list\n\n# Installer\nsudo apt update\nsudo apt install grafana\n\n# D\xe9marrer\nsudo systemctl start grafana-server\nsudo systemctl enable grafana-server\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acc\xe8s :"})," ",(0,r.jsx)(n.code,{children:"http://VOTRE_IP:3000"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Login par d\xe9faut :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Username: ",(0,r.jsx)(n.code,{children:"admin"})]}),"\n",(0,r.jsxs)(n.li,{children:["Password: ",(0,r.jsx)(n.code,{children:"admin"})," (\xe0 changer)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-grafana",children:"Configuration Grafana"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. Ajouter Data Source"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configuration > Data Sources"}),"\n",(0,r.jsx)(n.li,{children:"Add data source"}),"\n",(0,r.jsx)(n.li,{children:"Prometheus"}),"\n",(0,r.jsxs)(n.li,{children:["URL: ",(0,r.jsx)(n.code,{children:"http://localhost:9090"})]}),"\n",(0,r.jsx)(n.li,{children:"Save & Test"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. Importer Dashboard"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create > Import"}),"\n",(0,r.jsxs)(n.li,{children:["Dashboard ID: ",(0,r.jsx)(n.code,{children:"1860"})," (Node Exporter Full)"]}),"\n",(0,r.jsx)(n.li,{children:"Load"}),"\n",(0,r.jsx)(n.li,{children:"Select Prometheus data source"}),"\n",(0,r.jsx)(n.li,{children:"Import"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Dashboards recommand\xe9s :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"1860"})," : Node Exporter Full"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"11074"})," : Node Exporter for Prometheus"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"13978"})," : Docker monitoring"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"7362"})," : MySQL Overview"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"uptime-kuma",children:"Uptime Kuma"}),"\n",(0,r.jsx)(n.p,{children:"Monitoring uptime et alertes."}),"\n",(0,r.jsx)(n.h3,{id:"installation-via-docker",children:"Installation via Docker"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name uptime-kuma \\\n  --restart=unless-stopped \\\n  -p 3001:3001 \\\n  -v uptime-kuma:/app/data \\\n  louislam/uptime-kuma:1\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acc\xe8s :"})," ",(0,r.jsx)(n.code,{children:"http://VOTRE_IP:3001"})]}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. Cr\xe9er compte admin"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. Ajouter monitors"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Add New Monitor"}),"\n",(0,r.jsx)(n.li,{children:"Monitor Type: HTTP(s), TCP Port, Ping, Docker"}),"\n",(0,r.jsx)(n.li,{children:"Friendly Name: Mon Site Web"}),"\n",(0,r.jsxs)(n.li,{children:["URL: ",(0,r.jsx)(n.a,{href:"https://monsite.com",children:"https://monsite.com"})]}),"\n",(0,r.jsx)(n.li,{children:"Heartbeat Interval: 60 seconds"}),"\n",(0,r.jsx)(n.li,{children:"Retries: 3"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. Notifications"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Settings > Notifications"}),"\n",(0,r.jsxs)(n.li,{children:["Setup Notif Type:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Discord Webhook"}),"\n",(0,r.jsx)(n.li,{children:"Email (SMTP)"}),"\n",(0,r.jsx)(n.li,{children:"Telegram"}),"\n",(0,r.jsx)(n.li,{children:"Slack"}),"\n",(0,r.jsx)(n.li,{children:"Pushover"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"4. Status Page"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Status Pages > Add"}),"\n",(0,r.jsx)(n.li,{children:"URL publique pour clients"}),"\n",(0,r.jsx)(n.li,{children:"Choix monitors \xe0 afficher"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"scripts-monitoring-custom",children:"Scripts monitoring custom"}),"\n",(0,r.jsx)(n.h3,{id:"cpu-alert",children:"CPU Alert"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# cpu-alert.sh\n\nTHRESHOLD=80\nCPU=$(top -bn1 | grep "Cpu(s)" | awk \'{print $2}\' | cut -d\'%\' -f1)\n\nif (( $(echo "$CPU > $THRESHOLD" | bc -l) )); then\n    echo "\u26a0\ufe0f CPU Usage: ${CPU}%"\n    # Envoyer notification Discord\n    curl -X POST "WEBHOOK_URL" \\\n        -H "Content-Type: application/json" \\\n        -d "{\\"content\\":\\"\u26a0\ufe0f CPU \xe9lev\xe9: ${CPU}%\\"}"\nfi\n'})}),"\n",(0,r.jsx)(n.h3,{id:"disk-space-alert",children:"Disk Space Alert"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# disk-alert.sh\n\nTHRESHOLD=85\nUSAGE=$(df / | tail -1 | awk \'{print $5}\' | sed \'s/%//\')\n\nif [ $USAGE -gt $THRESHOLD ]; then\n    echo "\u26a0\ufe0f Disk Usage: ${USAGE}%"\n    # Notification\n    curl -X POST "WEBHOOK_URL" \\\n        -H "Content-Type: application/json" \\\n        -d "{\\"content\\":\\"\u26a0\ufe0f Disque plein: ${USAGE}%\\"}"\nfi\n'})}),"\n",(0,r.jsx)(n.h3,{id:"service-monitor",children:"Service Monitor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# service-monitor.sh\n\nSERVICES=("nginx" "mysql" "docker")\n\nfor service in "${SERVICES[@]}"; do\n    if ! systemctl is-active --quiet $service; then\n        echo "\u274c $service is down"\n        # Restart service\n        sudo systemctl restart $service\n        # Notification\n        curl -X POST "WEBHOOK_URL" \\\n            -H "Content-Type: application/json" \\\n            -d "{\\"content\\":\\"\u274c $service was down and restarted\\"}"\n    fi\ndone\n'})}),"\n",(0,r.jsx)(n.h3,{id:"automatiser-avec-cron",children:"Automatiser avec Cron"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"crontab -e\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# CPU check toutes les 5 minutes\n*/5 * * * * /root/scripts/cpu-alert.sh\n\n# Disk space check quotidien\n0 8 * * * /root/scripts/disk-alert.sh\n\n# Services check toutes les minutes\n* * * * * /root/scripts/service-monitor.sh\n"})}),"\n",(0,r.jsx)(n.h2,{id:"logs-centralis\xe9s",children:"Logs centralis\xe9s"}),"\n",(0,r.jsx)(n.h3,{id:"rsyslog",children:"rsyslog"}),"\n",(0,r.jsx)(n.p,{children:"Centraliser logs de plusieurs serveurs."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Serveur central :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/rsyslog.conf\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# Activer r\xe9ception TCP\nmodule(load="imtcp")\ninput(type="imtcp" port="514")\n\n# Template\n$template RemoteLogs,"/var/log/remote/%HOSTNAME%/%PROGRAMNAME%.log"\n*.* ?RemoteLogs\n& ~\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart rsyslog\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Clients :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/rsyslog.conf\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"*.* @@SERVEUR_IP:514\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart rsyslog\n"})}),"\n",(0,r.jsx)(n.h3,{id:"loki--grafana",children:"Loki + Grafana"}),"\n",(0,r.jsx)(n.p,{children:"Alternative moderne \xe0 ELK stack."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.yml\nversion: \'3.8\'\n\nservices:\n  loki:\n    image: grafana/loki:latest\n    ports:\n      - "3100:3100"\n    volumes:\n      - ./loki-config.yml:/etc/loki/local-config.yaml\n      - loki_data:/loki\n    command: -config.file=/etc/loki/local-config.yaml\n\n  promtail:\n    image: grafana/promtail:latest\n    volumes:\n      - /var/log:/var/log:ro\n      - ./promtail-config.yml:/etc/promtail/config.yml\n    command: -config.file=/etc/promtail/config.yml\n\n  grafana:\n    image: grafana/grafana:latest\n    ports:\n      - "3000:3000"\n    environment:\n      - GF_SECURITY_ADMIN_PASSWORD=admin\n    volumes:\n      - grafana_data:/var/lib/grafana\n\nvolumes:\n  loki_data:\n  grafana_data:\n'})}),"\n",(0,r.jsx)(n.h2,{id:"alertes-avanc\xe9es",children:"Alertes avanc\xe9es"}),"\n",(0,r.jsx)(n.h3,{id:"pagerduty",children:"PagerDuty"}),"\n",(0,r.jsx)(n.p,{children:"Service d'astreinte professionnel."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Int\xe9gration Prometheus :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# alertmanager.yml\nroute:\n  receiver: 'pagerduty'\n\nreceivers:\n  - name: 'pagerduty'\n    pagerduty_configs:\n      - service_key: 'VOTRE_SERVICE_KEY'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"opsgenie",children:"OpsGenie"}),"\n",(0,r.jsx)(n.p,{children:"Alternative PagerDuty."}),"\n",(0,r.jsx)(n.h3,{id:"healthchecksio",children:"Healthchecks.io"}),"\n",(0,r.jsx)(n.p,{children:"Monitoring de cronjobs."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Utilisation :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"#!/bin/bash\ncurl -fsS -m 10 --retry 5 https://hc-ping.com/VOTRE_UUID\n./mon-backup.sh\ncurl -fsS -m 10 --retry 5 https://hc-ping.com/VOTRE_UUID/$?\n"})}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-applications",children:"Monitoring applications"}),"\n",(0,r.jsx)(n.h3,{id:"pm2-monitoring",children:"PM2 Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"Pour applications Node.js."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Monitoring local\npm2 monit\n\n# Dashboard web\npm2 install pm2-server-monit\n\n# PM2 Plus (cloud)\npm2 link [secret] [public]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"apm-application-performance-monitoring",children:"APM (Application Performance Monitoring)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"New Relic :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Installer agent\nnpm install newrelic\n\n# Configuration\ncp node_modules/newrelic/newrelic.js .\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Datadog :"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Agent\nDD_AGENT_MAJOR_VERSION=7 DD_API_KEY=VOTRE_CLE bash -c "$(curl -L https://s3.amazonaws.com/dd-agent/scripts/install_script.sh)"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,r.jsx)(n.h3,{id:"checklist-monitoring",children:"Checklist monitoring"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitoring CPU/RAM/Disk en temps r\xe9el"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Alertes configur\xe9es (>80% CPU, >85% Disk)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Uptime monitoring sites critiques"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Logs centralis\xe9s et rotationn\xe9s"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Backup monitoring (v\xe9rifier r\xe9ussite)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Services monitoring (auto-restart)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Dashboard accessible \xe9quipe"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Notification multi-canaux (Discord, Email, SMS)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","R\xe9tention logs appropri\xe9e (30-90 jours)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Documentation proc\xe9dures d'urgence"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"m\xe9triques-importantes",children:"M\xe9triques importantes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Serveur :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CPU usage moyenne et pics"}),"\n",(0,r.jsx)(n.li,{children:"RAM disponible"}),"\n",(0,r.jsx)(n.li,{children:"Espace disque libre"}),"\n",(0,r.jsx)(n.li,{children:"Load average (1, 5, 15 min)"}),"\n",(0,r.jsx)(n.li,{children:"Disk I/O"}),"\n",(0,r.jsx)(n.li,{children:"Network throughput"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Application :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Response time"}),"\n",(0,r.jsx)(n.li,{children:"Error rate (%)"}),"\n",(0,r.jsx)(n.li,{children:"Requests per second"}),"\n",(0,r.jsx)(n.li,{children:"Database query time"}),"\n",(0,r.jsx)(n.li,{children:"Cache hit ratio"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Business :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Uptime (%)"}),"\n",(0,r.jsx)(n.li,{children:"Utilisateurs actifs"}),"\n",(0,r.jsx)(n.li,{children:"Conversions"}),"\n",(0,r.jsx)(n.li,{children:"Revenue"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"retention",children:"Retention"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"M\xe9triques :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Haute r\xe9solution (1s) : 1 jour"}),"\n",(0,r.jsx)(n.li,{children:"Moyenne r\xe9solution (1m) : 7 jours"}),"\n",(0,r.jsx)(n.li,{children:"Basse r\xe9solution (1h) : 90 jours"}),"\n",(0,r.jsx)(n.li,{children:"Archives (1d) : 1 an"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Logs :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Application : 30 jours"}),"\n",(0,r.jsx)(n.li,{children:"Acc\xe8s web : 30 jours"}),"\n",(0,r.jsx)(n.li,{children:"S\xe9curit\xe9/audit : 1 an"}),"\n",(0,r.jsx)(n.li,{children:"Erreurs : 90 jours"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://learn.netdata.cloud/",children:"Netdata Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://prometheus.io/docs/",children:"Prometheus Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://grafana.com/docs/",children:"Grafana Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/louislam/uptime-kuma",children:"Uptime Kuma GitHub"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,r.jsxs)(n.p,{children:["Questions monitoring ? ",(0,r.jsx)(n.a,{href:"https://discord.gg/UaHNnMarQA",children:"Discord LKL Cloud"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);