"use strict";(globalThis.webpackChunkmon_site=globalThis.webpackChunkmon_site||[]).push([[7245],{6260(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"fivem/discount","title":"H\xe9berger un bot Discord sur LKL Cloud","description":"Guide pour h\xe9berger votre bot Discord sur un VPS LKL Cloud avec Node.js, Python ou autres langages.","source":"@site/docs/fivem/discount.md","sourceDirName":"fivem","slug":"/fivem/discount","permalink":"/fivem/discount","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1771971631000,"frontMatter":{"title":"H\xe9berger un bot Discord sur LKL Cloud"},"sidebar":"docs","previous":{"title":"Mettre \xe0 jour les artefacts FiveM","permalink":"/fivem/mettre-a-jour-artifacts"},"next":{"title":"Serveur Minecraft","permalink":"/minecraft/"}}');var i=s(4848),o=s(8453);const t={title:"H\xe9berger un bot Discord sur LKL Cloud"},l=void 0,d={},c=[{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Cr\xe9er votre bot Discord",id:"cr\xe9er-votre-bot-discord",level:2},{value:"Via Discord Developer Portal",id:"via-discord-developer-portal",level:3},{value:"Inviter le bot sur votre serveur",id:"inviter-le-bot-sur-votre-serveur",level:3},{value:"H\xe9bergement bot Node.js (Discord.js)",id:"h\xe9bergement-bot-nodejs-discordjs",level:2},{value:"Installation Node.js",id:"installation-nodejs",level:3},{value:"Cr\xe9er le bot",id:"cr\xe9er-le-bot",level:3},{value:"D\xe9ployer sur VPS",id:"d\xe9ployer-sur-vps",level:3},{value:"H\xe9bergement bot Python (discord.py)",id:"h\xe9bergement-bot-python-discordpy",level:2},{value:"Installation Python",id:"installation-python",level:3},{value:"Cr\xe9er le bot",id:"cr\xe9er-le-bot-1",level:3},{value:"D\xe9ployer avec systemd",id:"d\xe9ployer-avec-systemd",level:3},{value:"Commandes Slash (Interactions)",id:"commandes-slash-interactions",level:2},{value:"Discord.js exemple",id:"discordjs-exemple",level:3},{value:"Bot avec base de donn\xe9es",id:"bot-avec-base-de-donn\xe9es",level:2},{value:"SQLite (Simple)",id:"sqlite-simple",level:3},{value:"MySQL (Production)",id:"mysql-production",level:3},{value:"S\xe9curit\xe9",id:"s\xe9curit\xe9",level:2},{value:"Variables d&#39;environnement",id:"variables-denvironnement",level:3},{value:"Gitignore",id:"gitignore",level:3},{value:"Permissions minimales",id:"permissions-minimales",level:3},{value:"Monitoring et logs",id:"monitoring-et-logs",level:2},{value:"Winston (Logging)",id:"winston-logging",level:3},{value:"Status monitoring",id:"status-monitoring",level:3},{value:"Optimisation performances",id:"optimisation-performances",level:2},{value:"Partitioning (Sharding)",id:"partitioning-sharding",level:3},{value:"Cache optimization",id:"cache-optimization",level:3},{value:"Mise \xe0 jour automatique",id:"mise-\xe0-jour-automatique",level:2},{value:"Script update",id:"script-update",level:3},{value:"GitHub Webhooks",id:"github-webhooks",level:3},{value:"D\xe9pannage",id:"d\xe9pannage",level:2},{value:"Bot offline",id:"bot-offline",level:3},{value:"Token invalide",id:"token-invalide",level:3},{value:"Missing permissions",id:"missing-permissions",level:3},{value:"Rate limiting",id:"rate-limiting",level:3},{value:"Exemples de bots",id:"exemples-de-bots",level:2},{value:"Bot mod\xe9ration",id:"bot-mod\xe9ration",level:3},{value:"Bot musique (simple)",id:"bot-musique-simple",level:3},{value:"Bot statistiques",id:"bot-statistiques",level:3},{value:"Ressources",id:"ressources",level:2},{value:"Support",id:"support",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Guide pour h\xe9berger votre bot Discord sur un VPS LKL Cloud avec Node.js, Python ou autres langages."}),"\n",(0,i.jsx)(n.h2,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"VPS Linux (Debian/Ubuntu recommand\xe9)"}),"\n",(0,i.jsxs)(n.li,{children:["Bot Discord cr\xe9\xe9 sur ",(0,i.jsx)(n.a,{href:"https://discord.com/developers/applications",children:"Discord Developer Portal"})]}),"\n",(0,i.jsx)(n.li,{children:"Token du bot"}),"\n",(0,i.jsx)(n.li,{children:"Connaissances de base en ligne de commande"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cr\xe9er-votre-bot-discord",children:"Cr\xe9er votre bot Discord"}),"\n",(0,i.jsx)(n.h3,{id:"via-discord-developer-portal",children:"Via Discord Developer Portal"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Allez sur ",(0,i.jsx)(n.a,{href:"https://discord.com/developers/applications",children:"https://discord.com/developers/applications"})]}),"\n",(0,i.jsxs)(n.li,{children:["Cliquez ",(0,i.jsx)(n.strong,{children:"New Application"})]}),"\n",(0,i.jsx)(n.li,{children:"Nommez votre application"}),"\n",(0,i.jsxs)(n.li,{children:["Menu ",(0,i.jsx)(n.strong,{children:"Bot"})," > ",(0,i.jsx)(n.strong,{children:"Add Bot"})]}),"\n",(0,i.jsxs)(n.li,{children:["Copiez le ",(0,i.jsx)(n.strong,{children:"Token"})," (gardez-le secret !)"]}),"\n",(0,i.jsxs)(n.li,{children:["Activez ",(0,i.jsx)(n.strong,{children:"Privileged Gateway Intents"})," si n\xe9cessaire :","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Presence Intent"}),"\n",(0,i.jsx)(n.li,{children:"Server Members Intent"}),"\n",(0,i.jsx)(n.li,{children:"Message Content Intent"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"inviter-le-bot-sur-votre-serveur",children:"Inviter le bot sur votre serveur"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Menu ",(0,i.jsx)(n.strong,{children:"OAuth2"})," > ",(0,i.jsx)(n.strong,{children:"URL Generator"})]}),"\n",(0,i.jsxs)(n.li,{children:["Scopes : ",(0,i.jsx)(n.code,{children:"bot"})," et ",(0,i.jsx)(n.code,{children:"applications.commands"})]}),"\n",(0,i.jsx)(n.li,{children:"Permissions : S\xe9lectionnez selon besoins"}),"\n",(0,i.jsx)(n.li,{children:"Copiez l'URL g\xe9n\xe9r\xe9e"}),"\n",(0,i.jsx)(n.li,{children:"Ouvrez dans navigateur"}),"\n",(0,i.jsx)(n.li,{children:"S\xe9lectionnez serveur et autorisez"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"h\xe9bergement-bot-nodejs-discordjs",children:"H\xe9bergement bot Node.js (Discord.js)"}),"\n",(0,i.jsx)(n.h3,{id:"installation-nodejs",children:"Installation Node.js"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Mise \xe0 jour syst\xe8me\nsudo apt update && sudo apt upgrade -y\n\n# Installer Node.js 20 LTS\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# V\xe9rifier installation\nnode --version\nnpm --version\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cr\xe9er-le-bot",children:"Cr\xe9er le bot"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Structure projet :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir discord-bot\ncd discord-bot\nnpm init -y\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Installer d\xe9pendances :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install discord.js dotenv\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Cr\xe9er fichier ",(0,i.jsx)(n.code,{children:".env"})," :"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"DISCORD_TOKEN=votre_token_ici\nCLIENT_ID=votre_client_id\nGUILD_ID=votre_serveur_id\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Cr\xe9er ",(0,i.jsx)(n.code,{children:"index.js"})," :"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"require('dotenv').config();\nconst { Client, GatewayIntentBits } = require('discord.js');\n\nconst client = new Client({\n    intents: [\n        GatewayIntentBits.Guilds,\n        GatewayIntentBits.GuildMessages,\n        GatewayIntentBits.MessageContent,\n    ],\n});\n\nclient.once('ready', () => {\n    console.log(`\u2705 Bot connect\xe9 en tant que ${client.user.tag}`);\n});\n\nclient.on('messageCreate', message => {\n    if (message.content === '!ping') {\n        message.reply('\ud83c\udfd3 Pong!');\n    }\n});\n\nclient.login(process.env.DISCORD_TOKEN);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tester localement :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"node index.js\n"})}),"\n",(0,i.jsx)(n.h3,{id:"d\xe9ployer-sur-vps",children:"D\xe9ployer sur VPS"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Upload via SFTP/SCP :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Depuis votre PC\nscp -r discord-bot/ user@IP_VPS:/home/user/\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Installer PM2 (Process Manager) :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo npm install -g pm2\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. D\xe9marrer le bot :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd /home/user/discord-bot\npm2 start index.js --name discord-bot\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"4. Configuration auto-start :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pm2 startup\npm2 save\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Commandes PM2 utiles :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pm2 list              # Lister processus\npm2 logs discord-bot  # Voir logs\npm2 restart discord-bot  # Red\xe9marrer\npm2 stop discord-bot  # Arr\xeater\npm2 delete discord-bot  # Supprimer\n"})}),"\n",(0,i.jsx)(n.h2,{id:"h\xe9bergement-bot-python-discordpy",children:"H\xe9bergement bot Python (discord.py)"}),"\n",(0,i.jsx)(n.h3,{id:"installation-python",children:"Installation Python"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install python3 python3-pip python3-venv -y\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cr\xe9er-le-bot-1",children:"Cr\xe9er le bot"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Structure projet :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir discord-bot-py\ncd discord-bot-py\npython3 -m venv venv\nsource venv/bin/activate\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Installer d\xe9pendances :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install discord.py python-dotenv\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Cr\xe9er ",(0,i.jsx)(n.code,{children:".env"})," :"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:"DISCORD_TOKEN=votre_token\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Cr\xe9er ",(0,i.jsx)(n.code,{children:"bot.py"})," :"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nimport discord\nfrom discord.ext import commands\nfrom dotenv import load_dotenv\n\nload_dotenv()\nTOKEN = os.getenv('DISCORD_TOKEN')\n\nintents = discord.Intents.default()\nintents.message_content = True\n\nbot = commands.Bot(command_prefix='!', intents=intents)\n\n@bot.event\nasync def on_ready():\n    print(f'\u2705 {bot.user} est connect\xe9!')\n\n@bot.command()\nasync def ping(ctx):\n    await ctx.send('\ud83c\udfd3 Pong!')\n\nbot.run(TOKEN)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"d\xe9ployer-avec-systemd",children:"D\xe9ployer avec systemd"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Cr\xe9er service systemd :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/systemd/system/discord-bot.service\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Contenu :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:'[Unit]\nDescription=Discord Bot Python\nAfter=network.target\n\n[Service]\nType=simple\nUser=votre_user\nWorkingDirectory=/home/votre_user/discord-bot-py\nEnvironment="PATH=/home/votre_user/discord-bot-py/venv/bin"\nExecStart=/home/votre_user/discord-bot-py/venv/bin/python bot.py\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Activer et d\xe9marrer :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo systemctl daemon-reload\nsudo systemctl enable discord-bot\nsudo systemctl start discord-bot\n\n# V\xe9rifier statut\nsudo systemctl status discord-bot\n\n# Voir logs\nsudo journalctl -u discord-bot -f\n"})}),"\n",(0,i.jsx)(n.h2,{id:"commandes-slash-interactions",children:"Commandes Slash (Interactions)"}),"\n",(0,i.jsx)(n.h3,{id:"discordjs-exemple",children:"Discord.js exemple"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"deploy-commands.js :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { REST, Routes } = require('discord.js');\nrequire('dotenv').config();\n\nconst commands = [\n    {\n        name: 'ping',\n        description: 'R\xe9pond avec Pong!',\n    },\n    {\n        name: 'serveur',\n        description: 'Informations sur le serveur',\n    },\n];\n\nconst rest = new REST({ version: '10' }).setToken(process.env.DISCORD_TOKEN);\n\n(async () => {\n    try {\n        console.log('Enregistrement des commandes...');\n        await rest.put(\n            Routes.applicationGuildCommands(process.env.CLIENT_ID, process.env.GUILD_ID),\n            { body: commands },\n        );\n        console.log('\u2705 Commandes enregistr\xe9es!');\n    } catch (error) {\n        console.error(error);\n    }\n})();\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Ex\xe9cuter :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"node deploy-commands.js\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Handler dans index.js :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"client.on('interactionCreate', async interaction => {\n    if (!interaction.isChatInputCommand()) return;\n\n    if (interaction.commandName === 'ping') {\n        await interaction.reply('\ud83c\udfd3 Pong!');\n    }\n\n    if (interaction.commandName === 'serveur') {\n        await interaction.reply(`Serveur: ${interaction.guild.name}\\nMembres: ${interaction.guild.memberCount}`);\n    }\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bot-avec-base-de-donn\xe9es",children:"Bot avec base de donn\xe9es"}),"\n",(0,i.jsx)(n.h3,{id:"sqlite-simple",children:"SQLite (Simple)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Node.js avec better-sqlite3 :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install better-sqlite3\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const Database = require('better-sqlite3');\nconst db = new Database('bot.db');\n\n// Cr\xe9er table\ndb.exec(`\n    CREATE TABLE IF NOT EXISTS users (\n        id TEXT PRIMARY KEY,\n        points INTEGER DEFAULT 0\n    )\n`);\n\n// Ajouter points\nfunction addPoints(userId, points) {\n    const stmt = db.prepare('INSERT OR REPLACE INTO users (id, points) VALUES (?, ?)');\n    stmt.run(userId, points);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mysql-production",children:"MySQL (Production)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install mysql2\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const mysql = require('mysql2/promise');\n\nconst pool = mysql.createPool({\n    host: 'localhost',\n    user: 'bot_user',\n    password: 'password',\n    database: 'discord_bot',\n    waitForConnections: true,\n    connectionLimit: 10,\n});\n\n// Utilisation\nasync function getUser(userId) {\n    const [rows] = await pool.query('SELECT * FROM users WHERE id = ?', [userId]);\n    return rows[0];\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"s\xe9curit\xe9",children:"S\xe9curit\xe9"}),"\n",(0,i.jsx)(n.h3,{id:"variables-denvironnement",children:"Variables d'environnement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Ne jamais hardcoder le token !"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// \u274c MAUVAIS\nconst token = 'MTIzNDU2Nzg5MDEyMzQ1Njc4.XXXXXX.YYYYYY';\n\n// \u2705 BON\nrequire('dotenv').config();\nconst token = process.env.DISCORD_TOKEN;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gitignore",children:"Gitignore"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Cr\xe9er ",(0,i.jsx)(n.code,{children:".gitignore"})," :"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"node_modules/\n.env\n*.log\nconfig.json\nbot.db\n"})}),"\n",(0,i.jsx)(n.h3,{id:"permissions-minimales",children:"Permissions minimales"}),"\n",(0,i.jsx)(n.p,{children:"N'accordez que les permissions n\xe9cessaires au bot :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Intents minimaux\nconst client = new Client({\n    intents: [\n        GatewayIntentBits.Guilds,\n        GatewayIntentBits.GuildMessages,\n        // N'ajoutez que ce dont vous avez besoin\n    ],\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-et-logs",children:"Monitoring et logs"}),"\n",(0,i.jsx)(n.h3,{id:"winston-logging",children:"Winston (Logging)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install winston\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const winston = require('winston');\n\nconst logger = winston.createLogger({\n    level: 'info',\n    format: winston.format.json(),\n    transports: [\n        new winston.transports.File({ filename: 'error.log', level: 'error' }),\n        new winston.transports.File({ filename: 'combined.log' }),\n    ],\n});\n\nlogger.info('Bot d\xe9marr\xe9');\nlogger.error('Erreur:', error);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"status-monitoring",children:"Status monitoring"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"client.once('ready', () => {\n    client.user.setActivity('Surveiller le serveur', { type: 'WATCHING' });\n    \n    // Update r\xe9gulier\n    setInterval(() => {\n        const serverCount = client.guilds.cache.size;\n        client.user.setActivity(`${serverCount} serveurs`, { type: 'WATCHING' });\n    }, 60000);\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"optimisation-performances",children:"Optimisation performances"}),"\n",(0,i.jsx)(n.h3,{id:"partitioning-sharding",children:"Partitioning (Sharding)"}),"\n",(0,i.jsx)(n.p,{children:"Pour bots sur 2500+ serveurs :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { ShardingManager } = require('discord.js');\n\nconst manager = new ShardingManager('./bot.js', { \n    token: process.env.DISCORD_TOKEN,\n    totalShards: 'auto'\n});\n\nmanager.on('shardCreate', shard => {\n    console.log(`Shard ${shard.id} lanc\xe9`);\n});\n\nmanager.spawn();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cache-optimization",children:"Cache optimization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const client = new Client({\n    intents: [...],\n    makeCache: Options.cacheWithLimits({\n        MessageManager: 200, // Limite messages en cache\n        UserManager: 100,\n    }),\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"mise-\xe0-jour-automatique",children:"Mise \xe0 jour automatique"}),"\n",(0,i.jsx)(n.h3,{id:"script-update",children:"Script update"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"update.sh :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n\ncd /home/user/discord-bot\n\necho "\ud83d\udd04 Mise \xe0 jour du bot..."\n\n# Pull changements\ngit pull origin main\n\n# Installer d\xe9pendances\nnpm install\n\n# Red\xe9marrer\npm2 restart discord-bot\n\necho "\u2705 Bot mis \xe0 jour!"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"github-webhooks",children:"GitHub Webhooks"}),"\n",(0,i.jsx)(n.p,{children:"Configurez webhook pour deploy automatique :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// webhook-server.js\nconst express = require('express');\nconst { exec } = require('child_process');\nconst app = express();\n\napp.post('/webhook', (req, res) => {\n    exec('bash /home/user/update.sh', (error, stdout) => {\n        console.log(stdout);\n    });\n    res.sendStatus(200);\n});\n\napp.listen(3000);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"d\xe9pannage",children:"D\xe9pannage"}),"\n",(0,i.jsx)(n.h3,{id:"bot-offline",children:"Bot offline"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"V\xe9rifications :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# PM2\npm2 logs discord-bot\n\n# Systemd\nsudo systemctl status discord-bot\nsudo journalctl -u discord-bot -n 50\n"})}),"\n",(0,i.jsx)(n.h3,{id:"token-invalide",children:"Token invalide"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: An invalid token was provided\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"R\xe9g\xe9n\xe9rez token sur Developer Portal"}),"\n",(0,i.jsxs)(n.li,{children:["Mettez \xe0 jour ",(0,i.jsx)(n.code,{children:".env"})]}),"\n",(0,i.jsx)(n.li,{children:"Red\xe9marrez bot"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"missing-permissions",children:"Missing permissions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"DiscordAPIError: Missing Permissions\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"V\xe9rifiez permissions bot sur serveur"}),"\n",(0,i.jsx)(n.li,{children:"V\xe9rifiez r\xf4le bot hi\xe9rarchie"}),"\n",(0,i.jsx)(n.li,{children:"Ajustez permissions n\xe9cessaires"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rate-limiting",children:"Rate limiting"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"DiscordAPIError: You are being rate limited\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"R\xe9duisez fr\xe9quence requ\xeates API"}),"\n",(0,i.jsx)(n.li,{children:"Impl\xe9mentez d\xe9lais entre actions"}),"\n",(0,i.jsx)(n.li,{children:"Utilisez batch requests"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"exemples-de-bots",children:"Exemples de bots"}),"\n",(0,i.jsx)(n.h3,{id:"bot-mod\xe9ration",children:"Bot mod\xe9ration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"client.on('messageCreate', message => {\n    if (message.author.bot) return;\n    \n    // Anti-spam\n    const filter = ['spam', 'mot_interdit'];\n    const content = message.content.toLowerCase();\n    \n    if (filter.some(word => content.includes(word))) {\n        message.delete();\n        message.channel.send(`${message.author}, message supprim\xe9!`);\n    }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"bot-musique-simple",children:"Bot musique (simple)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install @discordjs/voice @discordjs/opus\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { joinVoiceChannel, createAudioPlayer } = require('@discordjs/voice');\n\nclient.on('interactionCreate', async interaction => {\n    if (interaction.commandName === 'play') {\n        const channel = interaction.member.voice.channel;\n        if (!channel) {\n            return interaction.reply('Rejoignez un salon vocal!');\n        }\n        \n        const connection = joinVoiceChannel({\n            channelId: channel.id,\n            guildId: interaction.guildId,\n            adapterCreator: interaction.guild.voiceAdapterCreator,\n        });\n        \n        // Jouer audio...\n    }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"bot-statistiques",children:"Bot statistiques"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"client.on('ready', () => {\n    const stats = {\n        servers: client.guilds.cache.size,\n        users: client.users.cache.size,\n        channels: client.channels.cache.size,\n    };\n    \n    console.log(`\ud83d\udcca Stats: ${JSON.stringify(stats, null, 2)}`);\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://discordjs.guide/",children:"Discord.js Guide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://discordpy.readthedocs.io/",children:"discord.py Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://discord.com/developers/docs",children:"Discord Developer Portal"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://discord.js.org/",children:"Discord.js Documentation"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,i.jsxs)(n.p,{children:["Questions sur h\xe9bergement bot ? ",(0,i.jsx)(n.a,{href:"https://discord.gg/UaHNnMarQA",children:"Discord LKL Cloud"})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);